<html
    xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
    xmlns:rkwSurvey="http://typo3.org/ns/RKW/RkwSurvey/ViewHelpers"
    data-namespace-typo3-fluid="true">


    <f:render section="main" />

    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

    <script>

        var options = {
            chart: {
                type: 'radar'
            },
            series: [
                {
                    name: "Ihr Wert",
                    data: <f:format.raw><rkwSurvey:passArrayToJS data="{chart.values.individual}" /></f:format.raw>,
                },
                {
                    name: "GEM",
                    data: <f:format.raw><rkwSurvey:passArrayToJS data="{chart.values.benchmark}" /></f:format.raw>,
                },
                {
                    data: [0, 0, 11, 11],
                },
                {
                    data: [11, 0, 0, 11],
                },
                {
                    data: [11, 11, 0, 0],
                },
                {
                    data: [0, 11, 11, 0],
                }
            ],
            labels: <f:format.raw><rkwSurvey:passArrayToJS data="{chart.labels}" /></f:format.raw>
        }

        var chart = new ApexCharts(document.querySelector("#chart"), options);

        chart.render();

    </script>

    <f:for each="{donuts}" as="donut" iteration="iterDonut" key="identifier">

        <f:for each="{donut}" as="comparison" iteration="iterComparison" key="comparisonIdentifier">

            <p>{comparisonIdentifier}</p>

            <script>

                var options = {
                    chart: {
                        type: 'donut'
                    },
                    series: <f:format.raw><rkwSurvey:passArrayToJS data="{donut.data.my-region.evaluation.series}" /></f:format.raw>,
                    plotOptions: {
                        pie: {
                            customScale: 0.5
                        }
                    },
                    legend: {
                        show: false
                    }
                }

                var selector = '#{identifier}-{comparisonIdentifier}';

                console.log(selector);

                var chart = new ApexCharts(document.querySelector(selector), options);

                chart.render();

            </script>

        </f:for>

    </f:for>

</html>